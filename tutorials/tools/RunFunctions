# runParallel in 1.7.x does not handle additional arguments, this is from 2.1.x

runParallelFIX()
{
   APP_RUN=$1
   APP_NAME=${1##*/}
   shift

   if [ -f log.$APP_NAME ]
   then
      echo "$APP_NAME already run on $PWD: remove log file to re-run"
   else
      nProcs=$1
      shift
      echo "Running $APP_RUN in parallel on $PWD using $nProcs processes"

      ( mpirun -np $nProcs $APP_RUN -parallel "$@" < /dev/null > log.$APP_NAME 2>&1 )
   fi
}

